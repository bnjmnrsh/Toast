{"version":3,"file":"Toast.js","sources":["../src/Toast.js"],"sourcesContent":["/**\n * A utility for mananging toast like UI messages.\n */\nexport const Toast = (function (options = {}) {\n  const settings = {\n    selector: 'body',\n    className: 'toast'\n  }\n\n  const Constructor = function (options) {\n    let ID = 0\n    const publicAPIs = {}\n    publicAPIs.settings = { ...settings, ...options }\n    publicAPIs.className = publicAPIs.settings.className\n    publicAPIs.target = document.querySelector(publicAPIs.settings.selector)\n\n    if (!publicAPIs.target) {\n      throw new Error(\n        `Toast: the target element \"${publicAPIs.settings.selector}\" could not be found.`\n      )\n    }\n\n    // Private Methods\n    /**\n     * Simple unique ID generator for toasts.\n     * ID's are unique for the current session only.\n     *\n     * @returns string ID, unique to the current session\n     */\n    const toastID = function () {\n      return `${publicAPIs.settings.selector}-${ID++}`.toString()\n    }\n\n    /**\n     * Create new toast messages\n     *\n     * @param {string} message\n     * @param {int} autohide default 0 or autohide after specified milliseconds\n     * @param {boolean} dismiss outputs a dismiss button\n     * @param {boolean} prepend prepend instead of append the toast\n     * @param {array} classes an array of suplimental classes\n     * @param {string} id pass in your own ID insead of using the internal methods\n     * @returns {string|boolean:false} ID for the toast message just created\n     */\n    publicAPIs.create = function (\n      message,\n      autohide = 0,\n      dismiss = false,\n      prepend = true,\n      classes = [],\n      id = false\n    ) {\n      if (!message) {\n        throw new Error('Toast.js requires a message string!')\n      }\n      id = id || toastID()\n      const toast = document.createElement('div')\n\n      toast.setAttribute('role', 'alert')\n      toast.setAttribute('data-toast-id', id)\n      toast.classList.add(this.className, ...classes)\n      if (autohide) {\n        setTimeout(() => toast.remove(), autohide)\n      }\n      if (dismiss) {\n        toast.innerHTML = `${message} <button class=\"toast-close\" arial-lable=\"close\">&#x2715</button>`\n\n        toast.addEventListener('click', function (e) {\n          if (!e.target.matches('.toast-close')) return\n          toast.remove()\n          toast.removeEventListener('click', close)\n        })\n      } else {\n        toast.innerHTML = `${message}`\n      }\n      prepend\n        ? publicAPIs.target.prepend(toast)\n        : publicAPIs.target.append(toast)\n\n      // append message 1ms later so it will be announced by screen readers, thanks Heydon.\n      setTimeout(() => toast.innerHTML, 1)\n      return id\n    }\n\n    /**\n     * Remove toasts from DOM\n     *\n     * @param {string} id of the toast to be reomved from the DOM\n     * @returns\n     */\n    publicAPIs.destroy = function (id) {\n      if (!id) return false\n      const target = document.querySelector(`[data-toast-id=\"${id}\"]`)\n      if (target) {\n        target.remove()\n        return publicAPIs\n      }\n      return false\n    }\n    return publicAPIs\n  }\n  return Constructor\n})()\n"],"names":[],"mappings":"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"}